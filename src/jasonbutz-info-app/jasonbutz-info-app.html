<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/app-route/app-location.html">
<link rel="import" href="../../bower_components/app-route/app-route.html">
<link rel="import" href="../../bower_components/app-layout/app-header-layout/app-header-layout.html">
<link rel="import" href="../../bower_components/iron-ajax/iron-ajax.html">
<link rel="import" href="../../bower_components/iron-list/iron-list.html">
<link rel="import" href="../../bower_components/iron-pages/iron-pages.html">
<link rel="import" href="../../bower_components/jbutz-components/post-header/post-header.html">
<link rel="import" href="../../bower_components/jbutz-components/post-page/post-page.html">
<link rel="import" href="../../bower_components/html-include/src/html-include.html">

<dom-module id="jasonbutz-info-app">
    <template>
        <style>
            :host {
                display: block;
            }
        </style>
        <app-location route="{{route}}" use-hash-as-path></app-location>
        <app-route route="{{route}}" pattern="/:page" data="{{data}}"></app-route>
        <app-route route="{{route}}" pattern="/home"></app-route>
        <app-route route="{{route}}" pattern="/blog" tail="{{routeBlog}}"></app-route>
        <app-route route="{{routeBlog}}" pattern="/:date/:post" data="{{subrouteData}}"></app-route>


        <iron-pages attr-for-selected="id" selected="{{data.page}}">
            <div id="home">
                <iron-ajax url="[[dataFileUrl]]" last-response="{{postListData}}" auto></iron-ajax>
                <iron-list id="postList" items="[[postListData]]" as="item">
                    <template>
                        <div>
                            <div class="post-list-header">
                                <post-header post-data="[[item]]"></post-header>
                            </div>
                            <p>[[item.excerpt]]</p>
                            <p><a href="#/blog/[[item.url]]">Read More</a></p>
                        </div>
                    </template>
                </iron-list>
            </div>
            <div id="blog">
                <iron-ajax url="[[subrouteData.date]]/[[subrouteData.post]]" on-response="handleBlogResponse" handle-as="document" auto></iron-ajax>
                <div id="blogPost"></div>
            </div>
        </iron-pages>

    </template>

    <script src="jasonbutz-info-app.js"></script>
</dom-module>