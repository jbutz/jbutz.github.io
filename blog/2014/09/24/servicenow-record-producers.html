<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<title>Jason Butz - ServiceNow Record Producer Caveats</title>
	<meta name="viewport" content="width=device-width">

	<link rel="alternate" type="application/rss+xml" title="Blog Feed" href="http://www.jasonbutz.info/blog/atom.xml" />
	<link rel="alternate" type="application/rss+xml" title="Projects Feed" href="http://www.jasonbutz.info/project/atom.xml" />

	<!-- Foundation -->
	<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/foundation/4.1.6/css/normalize.min.css"/>
	<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/foundation/4.1.6/css/foundation.min.css"/>
	<link rel="stylesheet" href="/assets/css/social_foundicons.css"/>

	<link rel="stylesheet" href="/assets/css/syntax.css">
	<link rel="stylesheet" type="text/css" href="/assets/css/style.css" />

	<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
	<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/foundation/4.1.6/js/vendor/custom.modernizr.min.js"></script>
	<script type="text/javascript" src="/assets/js/plugins.js"></script>
</head>
<body>
	<header>
		<div class="row">
			<div class="small-8 large-6 columns">
				<h1><a href="/">Jason Butz</a></h1>
			</div>
			<div class="small-4 large-6 columns">
				<nav class="contain-to-grid">
					<div class="top-bar">
						<ul class="title-area">
							<li class="name"><!-- Leave this empty --></li>
							<li class="toggle-topbar menu-icon"><a href="#"><span>Menu</span></a></li>
						</ul>
						<section class="top-bar-section">
							<ul class="right">
								<li class="active"><a href="/">Home</a></li>
								<li><a href="/projects.html">Projects</a></li>
								<li><a href="/blog">Blog</a></li>
								<li><a href="/contact.html">Contact Me</a></li>
							</ul>
						</section>
					</div>
				</nav>
			</div>
		</div>
	</header>

	<section id="mainContent">
		<div class="small-12 large-8 large-centered columns">
<div class="row">
	<div class="small-12 columns">
		<h2>ServiceNow Record Producer Caveats <small>24 Sep 2014</small></h2>
	</div>
</div>
<div class="row">
	<div class="small-12 columns">
		<div class="post">
			<p>I recently ran into a problem when using Record Producers. In the script for the Record Producer I am using the <code>applyTemplate</code> function on the <code>current</code> GlideRecord. The template used varies, which is why I canâ€™t use the template field on the Record Producer. I kept ending up with duplicate task records with the exact same value in the number field.</p>

<p>After some tinkering I came to the conclusion that the <code>applyTemplate</code> method causes an insert, and that the Record Producer also does an insert after running the Record Producer script. After a lot of frustration I was looking through the Sandbox instance of ServiceNow when I noticed that the <em>New LDAP Server</em> inserted the <code>current</code> GlideRecord and they used the <code>setAbortAction</code> method. So I decided to give that a try.</p>

<p>Here is what I ended up with at the end of my Record Producer:</p>

<p><code>javascript
current.update();
current.setAbortAction(true);
</code></p>

<p>This works because the insert done by the Record Producer is aborted, and thus stops the duplicates.</p>

		</div>
	</div>
</div>

<div class="row">
	<div class="small-12 columns">
		<hr>
		<div id="disqus_thread"></div>
		<script type="text/javascript">
			/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
			var disqus_shortname = 'jasonbutzblog'; // required: replace example with your forum shortname
			var disqus_identifier = '/blog/2014/09/24/servicenow-record-producers';
			var disqus_title = 'ServiceNow Record Producer Caveats';
			var disqus_url = 'http://www.jasonbutz.info/blog/2014/09/24/servicenow-record-producers.html';

			/* * * DON'T EDIT BELOW THIS LINE * * */
			(function() {
				var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
				dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
				(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
			})();
		</script>
		<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
		<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
	</div>
</div>

		</div>
	</section>
	<footer>
		<div class="row">
			<div class="small-12 columns">
				<p>
					<small><a href="http://www.jasonbutz.info/blog/atom.xml" title="Blog RSS Feed"><i class="foundicon-rss">&nbsp;Blog RSS Feed</i></a></small>
					&nbsp;&nbsp;
					<small><a href="http://www.jasonbutz.info/project/atom.xml" title="Projects RSS Feed"><i class="foundicon-rss">&nbsp;Projects RSS Feed</i></a></small>
					<br />
					<small>Jason Butz &copy; 2012 - 2015</small><br>
				</p>
			</div>
		</div>
	</footer>
	<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/foundation/4.1.6/js/foundation.min.js"></script>
	<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/foundation/4.1.6/js/foundation/foundation.topbar.min.js"></script>
	<script type="text/javascript">$(document).foundation();</script>
	<!-- <script type="text/javascript" src="/assets/js/site.js"></script> -->
<script src='/assets/global-165f05faaf9ee3e1184dcce0ebb5b2a7.js' type='text/javascript'></script>

	<script>
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

		ga('create', 'UA-45171709-1', 'jasonbutz.info');
		ga('send', 'pageview');
	</script>
	<!--[if !(lte IE 8)]><!--> 
	<script type="text/javascript"> 
	(function(){var e=document.createElement("script");e.type="text/javascript";e.async=true;e.src=document.location.protocol+"//d1agz031tafz8n.cloudfront.net/thedaywefightback.js/widget.min.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)})()
	</script>
	<!--<![endif]-->
</body>
</html>