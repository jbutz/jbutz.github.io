<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <meta name="description" content="">
    <meta name="author" content="Jason Butz">

    <title>ServiceNow Record Producer Caveats</title>

    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" data-attr="shadow-page">
    <link href="/css/page.css" rel="stylesheet" data-attr="shadow-page">
    <link href="/css/highlight.css" rel="stylesheet" data-attr="shadow-page">
    <link href="/css/style.css" rel="stylesheet">
    
</head>

<body>
    <div id="layout" class="pure-g">
        <div class="sidebar pure-u-1 pure-u-md-1-4 pure-u-lg-1-5">
            <div class="header">
                <img class="pure-img-responsive rounded-circle" src="/img/profile.jpg">
                <h1 class="brand-title">Jason Butz</h1>
                <h2 class="brand-tagline">Sr. Software Engineer<br />@ <a href="http://www.genesys.com/" target="_blank">Genesys</a></h2>

                <nav class="pure-menu">
                    <ul class="pure-menu-list">
                        <li class="pure-menu-item"><a href="/" class="pure-menu-link">Home</a></li>
                        <li class="pure-menu-item"><a href="/work" class="pure-menu-link">My Work</a></li>
                        <li class="pure-menu-item"><a href="/contact" class="pure-menu-link">Contact</a></li>
                    </ul>
                </nav>
            </div>
        </div>

        <div id="main" class="content pure-u-1 pure-u-md-3-4 pure-u-lg-4-5">            <div class="page-card">
                <div class="post-header">
                    <h1><a href="/blog/2014/09/24/servicenow-record-producer-caveats">ServiceNow Record Producer Caveats</a> <small>September 23rd 2014</small></h1>
                </div>                
                <p>I recently ran into a problem when using Record Producers. In the script for the Record Producer I am using the <code>applyTemplate</code> function on the <code>current</code> GlideRecord. The template used varies, which is why I can&#39;t use the template field on the Record Producer. I kept ending up with duplicate task records with the exact same value in the number field.</p>
<p>After some tinkering I came to the conclusion that the <code>applyTemplate</code> method causes an insert, and that the Record Producer also does an insert after running the Record Producer script. After a lot of frustration I was looking through the Sandbox instance of ServiceNow when I noticed that the <em>New LDAP Server</em> inserted the <code>current</code> GlideRecord and they used the <code>setAbortAction</code> method. So I decided to give that a try.</p>
<p>Here is what I ended up with at the end of my Record Producer:</p>
<pre><code class="lang-javascript">current.update();
current.setAbortAction(<span class="hljs-literal">true</span>);
</code></pre>
<p>This works because the insert done by the Record Producer is aborted, and thus stops the duplicates.</p>

            </div>
            </div>
        </div>
    </div>
    
</body>

</html>